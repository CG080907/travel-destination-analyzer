<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Reiseplaner ‚Äì Flug & Hotel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #0f172a;
      --card: #020617;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.15);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --danger: #f97373;
      --radius-lg: 18px;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.8);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1e293b 0, #020617 55%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 32px 16px;
    }

    .shell {
      width: 100%;
      max-width: 1200px;
      background: linear-gradient(135deg, #020617dd, #020617f5);
      border-radius: 28px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.2);
      overflow: hidden;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.3fr);
    }

    @media (max-width: 900px) {
      .shell {
        grid-template-columns: 1fr;
      }
    }

    .left {
      padding: 28px 32px 32px;
      border-right: 1px solid rgba(148, 163, 184, 0.18);
    }

    .right {
      padding: 28px 32px 32px;
      background: radial-gradient(circle at top left, #0b1120, #020617 60%);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
      margin-bottom: 10px;
    }

    .badge span.icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      display: grid;
      place-items: center;
      background: var(--accent-soft);
      color: var(--accent);
      font-size: 11px;
    }

    h1 {
      font-size: 28px;
      margin: 0 0 8px;
      letter-spacing: -0.03em;
    }

    .subtitle {
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 24px;
    }

    form {
      display: grid;
      gap: 16px;
    }

    .field-group {
      display: grid;
      gap: 4px;
    }

    label {
      font-size: 13px;
      color: var(--muted);
    }

    input,
    select {
      width: 100%;
      padding: 9px 11px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.8);
      color: var(--text);
      font-size: 14px;
      outline: none;
      transition: border-color 0.18s ease, box-shadow 0.18s ease,
        background 0.18s ease, transform 0.05s ease;
    }

    input:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.3);
      background: rgba(15, 23, 42, 0.95);
      transform: translateY(-0.5px);
    }

    .row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    .btn-primary {
      margin-top: 8px;
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 11px 16px;
      font-size: 15px;
      font-weight: 500;
      background: linear-gradient(135deg, #38bdf8, #22c55e);
      color: #0b1120;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 10px 30px rgba(34, 197, 94, 0.45);
      transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.05s ease;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 14px 40px rgba(34, 197, 94, 0.6);
    }

    .btn-primary span.icon {
      font-size: 17px;
    }

    .hint {
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }

    .results-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 18px;
    }

    .results-header-title {
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      color: var(--muted);
    }

    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      border: 1px solid rgba(148, 163, 184, 0.5);
      color: var(--muted);
    }

    .highlight-card {
      border-radius: var(--radius-lg);
      padding: 14px 16px;
      background: radial-gradient(circle at top left, #0b1120, #020617 70%);
      border: 1px solid rgba(56, 189, 248, 0.35);
      box-shadow: 0 15px 35px rgba(15, 23, 42, 0.9);
      margin-bottom: 18px;
    }

    .highlight-heading {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .highlight-main {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 6px;
    }

    .highlight-city {
      font-size: 20px;
      font-weight: 600;
    }

    .highlight-price {
      font-size: 18px;
      font-weight: 600;
      color: var(--accent);
    }

    .highlight-meta {
      font-size: 12px;
      color: var(--muted);
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    @media (max-width: 900px) {
      .cards {
        grid-template-columns: 1fr;
      }
    }

    .card {
      border-radius: var(--radius-lg);
      padding: 12px 13px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.3);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
    }

    .card-city {
      font-size: 15px;
      font-weight: 600;
    }

    .card-error {
      font-size: 13px;
      color: var(--danger);
    }

    .card-hotel {
      font-size: 13px;
      color: var(--muted);
    }

    .card-prices {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      margin-top: 4px;
    }

    .pill-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
    }

    .pill-value {
      font-size: 13px;
      font-weight: 500;
    }

    .empty-state {
      font-size: 13px;
      color: var(--muted);
      margin-top: 12px;
    }

    .error-banner {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(248, 113, 113, 0.08);
      border: 1px solid rgba(248, 113, 113, 0.6);
      font-size: 12px;
      color: #fecaca;
    }
  </style>
</head>
<body>
  <div class="shell">
    <!-- Linke Seite: Formular -->
    <div class="left">
      <div class="badge">
        <span class="icon">‚úàÔ∏è</span>
        Smart Travel Planner
      </div>
      <h1>Deine Reise in einem Klick planen</h1>
      <p class="subtitle">
        W√§hle Budget, Zeitraum, Abflughafen und Reisekategorie ‚Äì
        wir suchen passende Kombinationen aus Flug &amp; Hotel f√ºr mehrere Ziele.
      </p>

      <form method="post">
        <div class="field-group">
          <label for="budget">Budget (gesamt, in EUR)</label>
          <input
            type="number"
            step="50"
            min="100"
            id="budget"
            name="budget"
            placeholder="z.B. 800"
            required
          />
        </div>

        <div class="row">
          <div class="field-group">
            <label for="start_date">Anreisedatum</label>
            <input type="date" id="start_date" name="start_date" required />
          </div>
          <div class="field-group">
            <label for="end_date">Abreisedatum</label>
            <input type="date" id="end_date" name="end_date" required />
          </div>
        </div>

        <div class="field-group">
          <label for="origin_city">Abflughafen</label>
          <select id="origin_city" name="origin_city" required>
            <option value="" disabled selected>Bitte w√§hlen</option>
            {% for o in origins %}
              <option value="{{ o }}">{{ o }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="field-group">
          <label for="category">Reisekategorie</label>
          <select id="category" name="category" required>
            <option value="" disabled selected>Bitte ausw√§hlen</option>
            {% for c in categories %}
              <option value="{{ c }}">{{ c }}</option>
            {% endfor %}
          </select>
        </div>

        <button type="submit" class="btn-primary">
          <span class="icon">üîç</span>
          Passende Reisen suchen
        </button>

        <p class="hint">
          Hinweis: Es werden Echtzeit-Daten von Booking.com (Hotels &amp; Fl√ºge)
          √ºber die RapidAPI-Schnittstelle abgefragt. Preise sind Richtwerte.
        </p>
      </form>
    </div>

    <!-- Rechte Seite: Ergebnisse -->
    <div class="right">
      <div class="results-header">
        <div class="results-header-title">Ergebnisse</div>
        <div class="chip">Flug &amp; Hotel Kombinationen</div>
      </div>

      {% if not results %}
        <p class="empty-state">
          Noch keine Suche gestartet oder keine Ergebnisse vorhanden.<br />
          F√ºlle links das Formular aus und klicke auf
          <strong>‚ÄûPassende Reisen suchen‚Äú</strong>.
        </p>
      {% else %}

        {% if best_overall %}
          <div class="highlight-card">
            <div class="highlight-heading">Beste Option im Budget</div>
            <div class="highlight-main">
              <div class="highlight-city">{{ best_overall.city }}</div>
              <div class="highlight-price">
                ~ {{ "%.0f"|format(best_overall.total_price) }} ‚Ç¨
              </div>
            </div>
            <div class="highlight-meta">
              ‚úàÔ∏è Flug: {{ "%.0f"|format(best_overall.flight_price) }} ‚Ç¨ ¬∑
              üè® {{ best_overall.hotel_name }}:
              {{ "%.0f"|format(best_overall.hotel_price) }} ‚Ç¨ (Aufenthalt)
            </div>
          </div>
        {% endif %}

        <div class="cards">
          {% for r in results %}
            <div class="card">
              <div class="card-header">
                <div class="card-city">üèôÔ∏è {{ r.city }}</div>
                {% if r.error %}
                  <div class="card-error">Keine passende Kombination</div>
                {% else %}
                  <div class="card-error" style="color: var(--accent);">
                    ~ {{ "%.0f"|format(r.total_price) }} ‚Ç¨
                  </div>
                {% endif %}
              </div>

              {% if r.error %}
                <div class="card-error">{{ r.error }}</div>
              {% else %}
                <div class="card-hotel">
                  üè® <strong>{{ r.hotel_name }}</strong>
                </div>
                <div class="card-prices">
                  <div>
                    <div class="pill-label">Flug</div>
                    <div class="pill-value">
                      {{ "%.0f"|format(r.flight_price) }} ‚Ç¨
                    </div>
                  </div>
                  <div>
                    <div class="pill-label">Hotel (Aufenthalt)</div>
                    <div class="pill-value">
                      {{ "%.0f"|format(r.hotel_price) }} ‚Ç¨
                    </div>
                  </div>
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <div class="error-banner">
        Diese App ist ein Prototyp. Pr√ºfe Preise und Verf√ºgbarkeiten immer noch
        einmal direkt bei der Buchung.
      </div>
    </div>
  </div>
</body>
</html>

